(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{77:function(e,n,t){"use strict";t.r(n),t.d(n,"frontMatter",(function(){return o})),t.d(n,"metadata",(function(){return s})),t.d(n,"toc",(function(){return b})),t.d(n,"default",(function(){return m}));var i=t(3),r=t(7),a=(t(0),t(87)),o={id:"submitting",title:"Submitting a form"},s={unversionedId:"submitting",id:"submitting",isDocsHomePage:!1,title:"Submitting a form",description:"When defining a form, you are expected to return a TaskEither from the",source:"@site/docs/submitting.md",slug:"/submitting",permalink:"/formo/submitting",editUrl:"https://github.com/buildo/formo/edit/main/website/docs/submitting.md",version:"current",sidebar:"someSidebar",previous:{title:"Validating fields",permalink:"/formo/validating-fields"}},b=[],l={toc:b};function m(e){var n=e.components,t=Object(r.a)(e,["components"]);return Object(a.b)("wrapper",Object(i.a)({},l,t,{components:n,mdxType:"MDXLayout"}),Object(a.b)("p",null,"When defining a form, you are expected to return a ",Object(a.b)("inlineCode",{parentName:"p"},"TaskEither")," from the\n",Object(a.b)("inlineCode",{parentName:"p"},"onSubmit")," function."),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-ts"},'import { useFormo } from "formo";\n\nfunction login(\n  username: string;\n  password: string;\n): TaskEither<string, void> {\n  if (username === "admin" && password === "password") {\n    return taskEither.right(undefined)\n  } else {\n    return taskEither.left("wrong username/password combination!")\n  }\n};\n\nconst { handleSubmit, isSubmitting, formErrors } = useFormo(\n  {\n    initialValues: {\n      username: "",\n      password: "",\n    },\n  },\n  {\n    onSubmit: (values) => login(values.username, values.password)\n  }\n);\n')),Object(a.b)("p",null,"In order to perform the form submission you can run ",Object(a.b)("inlineCode",{parentName:"p"},"handleSubmit")," (usually by\npassing it to a ",Object(a.b)("inlineCode",{parentName:"p"},"<button>")," of some sort)."),Object(a.b)("p",null,"When the ",Object(a.b)("inlineCode",{parentName:"p"},"handleSubmit")," is run, a few things happen:"),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},Object(a.b)("p",{parentName:"li"},Object(a.b)("inlineCode",{parentName:"p"},"isSubmitting")," becomes ",Object(a.b)("inlineCode",{parentName:"p"},"true")," until the ",Object(a.b)("inlineCode",{parentName:"p"},"TaskEither")," completes (either\nsuccessfully or not)")),Object(a.b)("li",{parentName:"ul"},Object(a.b)("p",{parentName:"li"},'all fields are marked as "touched" and all field validations are run. If any\nof these validations fails, ',Object(a.b)("inlineCode",{parentName:"p"},"onSubmit")," is not run.")),Object(a.b)("li",{parentName:"ul"},Object(a.b)("p",{parentName:"li"},"if the ",Object(a.b)("inlineCode",{parentName:"p"},"TaskEither"),' resolves to a "left", ',Object(a.b)("inlineCode",{parentName:"p"},"formErrors")," will contain the error\nreturned (wrapped in an ",Object(a.b)("inlineCode",{parentName:"p"},"Option"),"). This allows you - for instance - to display\nform-level errors originated during the form submittion.")),Object(a.b)("li",{parentName:"ul"},Object(a.b)("p",{parentName:"li"},"if the ",Object(a.b)("inlineCode",{parentName:"p"},"TaskEither"),' resolves to a "right", the form submission has succeeded\nand ',Object(a.b)("inlineCode",{parentName:"p"},"formErrors")," will be ",Object(a.b)("inlineCode",{parentName:"p"},"None"),"."))))}m.isMDXComponent=!0}}]);